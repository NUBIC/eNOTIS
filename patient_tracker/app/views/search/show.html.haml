- @view_javascripts = ["facebox", "jquery.dataTables.min"]
- @view_stylesheets = ["facebox", "compiled/datatables"]

- content_for :head do
  :javascript
    $(document).ready(function(){$(".display").dataTable();});
          
#search_form
  - form_tag(search_path, :method => :get) do
    %span.search_hint Search for all studies and my subjects
    %br
    = text_field_tag :query, params[:query]
    = check_box_tag :'for[]', "studies", (!params[:for].blank? ? params[:for].include?("studies") : true)
    Studies
    = check_box_tag :'for[]', "subjects", (!params[:for].blank? ? params[:for].include?("subjects") : true)
    Subjects
    = submit_tag :search

#results
  - if @studies
    #study_results
      .heading= "#{pluralize(@studies.size, "study")} found"
      = render :partial => 'partials/study_table'
  - if @subjects
    #subject_results
      .heading= "#{pluralize(@subjects.size, "subject")} found"
      %table.display
        %thead
          %tr
            %th Name
        %tbody
          - @subjects.each do |subject|
            %tr
              %td= render :partial => 'partials/subject', :object => subject
