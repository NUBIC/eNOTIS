- @javascripts = %w(jquery-1.3.2.min jquery.dataTables.min)
- @stylesheets = %w(reset compiled/default compiled/datatables)

- content_for :head do
  :javascript
    $(document).ready(function(){$(".display").dataTable();});
  %style{:type => 'text/css'}
    :sass
      #search_form
        :text-align center
        :margin 1em
      #subject_results, #study_results
        :float left
        :width 48%
        :padding-right 2%
        .dataTables_filter
          :display none
          
#search_form
  - form_tag(search_path, :method => :get) do
    %span.search_hint Search for all studies and my subjects
    %br
    = text_field_tag :query, params[:query]
    = submit_tag :search

#results
  - if @studies
    #study_results
      .heading= "#{pluralize(@studies.size, "study")} found"
      = render :partial => 'partials/study_table'
  - if @subjects
    #subject_results
      .heading= "#{pluralize(@subjects.size, "subject")} found"
      %table.display
        %thead
          %tr
            %th Name
        %tbody
          - @subjects.each do |subject|
            %tr
              %td= render :partial => 'partials/subject', :object => subject
